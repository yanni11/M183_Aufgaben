
@{
    ViewBag.Title = "Fakelogin";
}

<h2>Fakelogin</h2>

<script type="text/javascript">

	var form = document.createElement("form");
	form.setAttribute("method", "POST");
	form.setAttribute("accept-charset", "utf-8");
	form.setAttribute("action", "");
	form.setAttribute("id", "myform");

	var input_Username = document.createElement("input");
	input_Username.setAttribute("name", "username");
	input_Username.setAttribute("type", "text");
	input_Username.setAttribute("id", "username");

	var input_Password = document.createElement("input");
	input_Password.setAttribute("name", "password");
	input_Password.setAttribute("type", "password");
	input_Password.setAttribute("id", "password");

	var input_SubmitBtn = document.createElement("input");
	input_SubmitBtn.setAttribute("name", "submit");
	input_SubmitBtn.setAttribute("value", "log in");
	input_SubmitBtn.setAttribute("type", "submit");

	form.appendChild(input_Username);
	form.appendChild(document.createElement("br"));
	form.appendChild(input_Password);
	form.appendChild(document.createElement("br"));
	form.appendChild(document.createElement("br"));
	form.appendChild(input_SubmitBtn);

	document.getElementsByTagName('body')[0].appendChild(form);


	form.addEventListener("submit", function (e) {
		e.preventDefault();
		e.stopPropagation();

		if (e.target && e.target.id == 'myform') {

			var xmlhttp = new XMLHttpRequest();

			var username = document.getElementById("username").value;
			var password = document.getElementById("password").value;

			console.log(username, password);

			var xhr = new XMLHttpRequest();
			xhr.open('POST', 'http://localhost:56327/Home/FakeloginPOST');
			xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
			xhr.send('username=' + username + '&password=' + password);

		}
	});


</script>

